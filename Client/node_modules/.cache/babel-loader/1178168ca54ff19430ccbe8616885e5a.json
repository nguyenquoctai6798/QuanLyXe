{"ast":null,"code":"var _jsxFileName = \"/home/quoctai/Tai/LSH (copy)/Client/src/component/searchBus.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport './searchBus.css';\nimport { Link, withRouter } from 'react-router-dom';\n\nclass SearchBus extends Component {\n  constructor(props) {\n    super(props);\n\n    this.booking = key => {\n      console.log(key);\n    };\n\n    this.searchBus = value => {\n      let data = value + '';\n      const link = 'http://localhost:8000/filterBus/' + data;\n      axios.get(link, {\n        data: data\n      }).then(result => {\n        this.setState({\n          listBus: result.data\n        });\n      });\n    };\n\n    this.filterBy = () => {\n      this.setState({\n        page: 1\n      });\n      const link = 'http://localhost:8000/filter/' + this.state.autoMarket + '/' + this.state.seatTotal + '?page=' + this.state.page;\n      axios.get(link).then(result => {\n        if (this.state.autoMarket === '0' && this.state.seatTotal === '0' || this.state.autoMarket === '0' && this.state.seatTotal !== '0') {\n          // this.setState({ listBus: result.data }) \n          this.setState({\n            listBus: result.data\n          });\n        } else if (this.state.autoMarket !== '0' && this.state.seatTotal === '0' || this.state.autoMarket !== '0' && this.state.seatTotal !== '0') {\n          if (result.data.length > 0) {\n            if (result.data[0].buses) {\n              this.setState({\n                listBus: result.data[0].buses\n              });\n            }\n          } else {\n            this.setState({\n              listBus: []\n            });\n          }\n        }\n      });\n    };\n\n    this.onChange = async e => {\n      let name = e.target.name;\n\n      if (name === 'keySearch') {\n        let value = e.target.value;\n        this.searchBus(value);\n      } else {\n        let value = e.target.value;\n\n        if (name === 'filterByAutoMarket') {\n          await this.setState({\n            autoMarket: value\n          });\n          this.filterBy();\n        } else if (name === 'filterBySeatTotal') {\n          await this.setState({\n            seatTotal: value\n          });\n          const link = 'http://localhost:8000/filter/' + this.state.autoMarket + '/' + this.state.seatTotal + '?page=' + this.state.page;\n          axios.post(link, {\n            value_automarket: this.state.autoMarket,\n            value_seattotal: value\n          }).then(result => {\n            if (this.state.autoMarket === '0' && this.state.seatTotal !== '0') {\n              // this.setState({ listBus: result.data }) \n              this.setState({\n                listBus: result.data\n              });\n            } else if (this.state.autoMarket !== '0' && this.state.seatTotal === '0' || this.state.autoMarket !== '0' && this.state.seatTotal !== '0') {\n              if (result.data.length > 0) {\n                if (result.data[0].buses) {\n                  this.setState({\n                    listBus: result.data[0].buses\n                  });\n                }\n              } else {\n                this.setState({\n                  listBus: []\n                });\n              }\n            }\n          });\n        }\n      }\n    };\n\n    this.getAllCar = () => {\n      let link = 'http://localhost:8000/getAllBus?page=' + this.state.page;\n      axios.get(link).then(async result => {\n        console.log(result.data.data);\n        this.setState({\n          listBus: result.data.data\n        });\n        let temp = result.data.data;\n        let listSeat = [];\n\n        for (let i = 0; i < temp.length - 1; i++) {\n          let numberOfOccurrences = 0;\n\n          for (let j = i + 1; j < temp.length; j++) {\n            if (temp[i].seattotal > temp[j].seattotal) {\n              let x = temp[i];\n              temp[i] = temp[j];\n              temp[j] = x;\n            }\n          }\n        }\n\n        this.setState({\n          listSeat: temp\n        });\n      });\n    };\n\n    this.getAllCarBack = () => {\n      let link = 'http://localhost:8000/getAllBus';\n      axios.post(link).then(async result => {\n        this.setState({\n          listBus: result.data.data\n        });\n        let temp = result.data.data;\n\n        for (let i = 0; i < temp.length - 1; i++) {\n          for (let j = i + 1; j < temp.length; j++) {\n            if (temp[i].seattotal > temp[j].seattotal) {\n              let x = temp[i];\n              temp[i] = temp[j];\n              temp[j] = x;\n            }\n\n            if (temp[j].seattotal === temp[i].seattotal) {\n              temp.splice(j, 1);\n            }\n          }\n        }\n\n        this.setState({\n          listSeat: temp\n        });\n        this.setState({\n          seatDiagram: []\n        });\n      });\n    };\n\n    this.getAllAutoMarket = () => {\n      let link = 'http://localhost:8000/getAllAutoMarket';\n      axios.post(link).then(result => {\n        this.setState({\n          listAutoMarket: result.data\n        });\n      });\n    };\n\n    this.showSeatDiagram = id => {\n      console.log(id);\n      let link = 'http://localhost:8000/showSeatDiagram';\n      axios.post(link, {\n        id: id\n      }).then(result => {\n        this.setState({\n          listBus: result.data\n        });\n        let seatCode = result.data[0].seats[0].seatcode;\n        let arr = JSON.parse(seatCode);\n        this.setState({\n          seatDiagram: arr\n        }); // let temp  = [[1, 0, 0, 1, 1], [0, 0, 0, 1, 1], [1, 1, 0, 0, 0], [1, 1, 0, 0, 0], [1, 1, 0, 1, 1], [1, 1, 0, 1, 1], [1, 1, 0, 1, 1], [1, 1, 0, 1, 1], [1, 1, 0, 1, 1], [1, 1, 1, 1, 1]]\n        // let arr = JSON.stringify(temp)\n        // let arr2 = JSON.parse(arr)\n        // console.log(arr2)\n      });\n    };\n\n    this.renderBus = () => {\n      return this.state.listBus.map((item, key) => React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row Bus\",\n        onClick: () => this.showSeatDiagram(item.id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        key: key,\n        className: \"aBus\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-sm-5 float-sm-left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: \"../lib/images/\".concat(item.img),\n        className: \"img-fluid\",\n        alt: \"avatar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"col-sm-7 float-sm-left \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        className: \"nameBus\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, item.name, \" - \", item.seattotal, \" ch\\u1ED5 \")), React.createElement(\"div\", {\n        className: \"descriptionBus\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, item.description)))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }))); // console.log('đã vào')\n    };\n\n    this.renderAutoMarker = () => {\n      return this.state.listAutoMarket.map(item => React.createElement(\"option\", {\n        key: item.id,\n        value: item.name,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, item.name));\n    };\n\n    this.renderSeatTotal = () => {\n      return this.state.listSeat.map(item => React.createElement(\"option\", {\n        key: item.id,\n        value: item.seattotal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, item.seattotal));\n    };\n\n    this.renderSeatDiagram = () => {\n      return this.state.seatDiagram.map((items, key) => {\n        return items.map((item, key2) => {\n          return (// <div>{console.log(item + ' - ' + key + key2)}</div>\n            key2 === items.length - 1 ? React.createElement(\"span\", {\n              key: true,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 211\n              },\n              __self: this\n            }, React.createElement(\"button\", {\n              onClick: () => this.booking(key + '' + key2),\n              key: key + '' + key2,\n              className: item === 0 ? 'btn btn-black' : 'btn btn-success',\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 211\n              },\n              __self: this\n            }, \"x\"), \" \", React.createElement(\"br\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 211\n              },\n              __self: this\n            })) : React.createElement(\"button\", {\n              onClick: () => this.booking(key + '' + key2),\n              key: key + '' + key2,\n              className: item === 0 ? 'btn btn-black' : 'btn btn-success',\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 211\n              },\n              __self: this\n            }, \"x\")\n          );\n        });\n      });\n    };\n\n    this.previousPage = async () => {\n      // if(this.state.autoMarket === '' || this.state.seatTotal === '')\n      let page = this.state.page;\n\n      if (page >= 2) {\n        await this.setState({\n          page: page - 1\n        }, () => console.log(this.state.page));\n        await this.getAllCar();\n      }\n    };\n\n    this.nextPage = async () => {\n      let page = this.state.page;\n      await this.setState({\n        page: page + 1\n      }, () => console.log(this.state.page));\n      await this.getAllCar();\n    };\n\n    this.state = {\n      listBus: [],\n      listAutoMarket: [],\n      listSeat: [],\n      autoMarket: '0',\n      seatTotal: '0',\n      seatDiagram: [],\n      page: 1\n    };\n  }\n\n  async componentDidMount() {\n    await this.getAllCar();\n    await this.getAllAutoMarket(); // let temp = [[1, 0, 0, 1, 1], [0, 0, 0, 1, 1], [1, 1, 0, 0, 0], [1, 1, 0, 0, 0], [1, 1, 0, 1, 1], [1, 1, 0, 1, 1], [1, 1, 0, 1, 1], [1, 1, 0, 1, 1], [1, 1, 0, 1, 1], [1, 1, 1, 1, 1]]\n    // this.setState({seatDiagram : temp});\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    }, \"Search Car\"), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"col-sm-11\",\n      type: \"text\",\n      name: \"keySearch\",\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"btn btn-success col-sm-1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fas fa-search\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"row select\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-sm-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244\n      },\n      __self: this\n    }), React.createElement(\"select\", {\n      className: \"form-control form-control-sm col-sm-3\",\n      onChange: this.onChange,\n      name: \"filterByAutoMarket\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    }, \"H\\xE3ng\"), this.renderAutoMarker()), React.createElement(\"select\", {\n      className: \"form-control form-control-sm col-sm-3\",\n      onChange: this.onChange,\n      name: \"filterBySeatTotal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }, \" S\\u1ED1 gh\\u1EBF \"), this.renderSeatTotal())), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254\n      },\n      __self: this\n    }), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"listBus\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256\n      },\n      __self: this\n    }, this.renderBus()), this.state.seatDiagram.length > 0 ? React.createElement(\"div\", {\n      className: \"seatDiagram\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }, \" S\\u01A1 \\u0111\\u1ED3 xe \"), this.renderSeatDiagram(), React.createElement(\"button\", {\n      className: \"btn btn-warning\",\n      onClick: this.getAllCarBack,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262\n      },\n      __self: this\n    }, \" Back \")) : '', React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264\n      },\n      __self: this\n    }), React.createElement(\"nav\", {\n      \"aria-label\": \"Page navigation example\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      className: \"pagination justify-content-center row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      className: \"page-item col-sm-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-success\",\n      onClick: this.previousPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268\n      },\n      __self: this\n    }, \" \", \"<<\", \" \")), React.createElement(\"li\", {\n      className: \"page-item col-sm-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-success\",\n      onClick: this.nextPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271\n      },\n      __self: this\n    }, \" \", \">>\", \" \"))))));\n  }\n\n}\n\nexport default SearchBus;","map":{"version":3,"sources":["/home/quoctai/Tai/LSH (copy)/Client/src/component/searchBus.js"],"names":["React","Component","axios","Link","withRouter","SearchBus","constructor","props","booking","key","console","log","searchBus","value","data","link","get","then","result","setState","listBus","filterBy","page","state","autoMarket","seatTotal","length","buses","onChange","e","name","target","post","value_automarket","value_seattotal","getAllCar","temp","listSeat","i","numberOfOccurrences","j","seattotal","x","getAllCarBack","splice","seatDiagram","getAllAutoMarket","listAutoMarket","showSeatDiagram","id","seatCode","seats","seatcode","arr","JSON","parse","renderBus","map","item","img","description","renderAutoMarker","renderSeatTotal","renderSeatDiagram","items","key2","previousPage","nextPage","componentDidMount","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios'\nimport './searchBus.css'\nimport { Link, withRouter } from 'react-router-dom';\n\nclass SearchBus extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      listBus: [],\n      listAutoMarket: [],\n      listSeat: [],\n      autoMarket: '0',\n      seatTotal: '0',\n      seatDiagram: [],\n      page : 1\n    }\n  }\n\n  booking = (key) => {\n    console.log(key)\n  }\n\n  searchBus = (value) => {\n    let data = value + ''\n    \n    const link = 'http://localhost:8000/filterBus/' + data\n  \n    axios.get(link, { data: data })\n      .then(result => {\n        this.setState({ listBus: result.data });\n      })\n  }\n  filterBy = () => {\n        this.setState({page: 1});\n        const link = 'http://localhost:8000/filter/' + this.state.autoMarket + '/' + this.state.seatTotal + '?page=' + this.state.page\n        axios.get(link)\n          .then(result => {\n            if ((this.state.autoMarket === '0' && this.state.seatTotal === '0') || (this.state.autoMarket === '0' && this.state.seatTotal !== '0')) {\n              // this.setState({ listBus: result.data }) \n              this.setState({ listBus: result.data });\n            }\n\n            else if ((this.state.autoMarket !== '0' && this.state.seatTotal === '0') || (this.state.autoMarket !== '0' && this.state.seatTotal !== '0')) {\n              if (result.data.length > 0) {\n                if (result.data[0].buses) {\n                  this.setState({ listBus: result.data[0].buses })\n                }\n              }\n              else {\n                this.setState({ listBus: [] });\n              }\n            }\n          })\n  }\n  onChange = async(e) => {\n    let name = e.target.name\n    if (name === 'keySearch') {\n      let value = e.target.value\n      this.searchBus(value)\n    }\n\n    else {\n      let value = e.target.value\n      if (name === 'filterByAutoMarket') {\n        await this.setState({autoMarket: value});\n        this.filterBy()\n      }\n      else if (name === 'filterBySeatTotal') {\n       await  this.setState({ seatTotal: value })\n        const link = 'http://localhost:8000/filter/' + this.state.autoMarket + '/' + this.state.seatTotal + '?page=' + this.state.page\n        axios.post(link, { value_automarket: this.state.autoMarket, value_seattotal: value })\n          .then(result => {\n            if (this.state.autoMarket === '0' && this.state.seatTotal !== '0') {\n              // this.setState({ listBus: result.data }) \n              this.setState({ listBus: result.data });\n            }\n\n            else if ((this.state.autoMarket !== '0' && this.state.seatTotal === '0') || (this.state.autoMarket !== '0' && this.state.seatTotal !== '0')) {\n              if (result.data.length > 0) {\n                if (result.data[0].buses) {\n                  this.setState({ listBus: result.data[0].buses })\n                }\n              }\n              else {\n                this.setState({ listBus: [] });\n              }\n            }\n          })\n      }\n    }\n  }\n\n  getAllCar = () => {\n    let link = 'http://localhost:8000/getAllBus?page=' + this.state.page\n    axios\n      .get(link)\n      .then(async result => {\n        console.log(result.data.data)\n        this.setState({ listBus: result.data.data })\n        let temp = result.data.data;\n        let listSeat = []\n        \n        for (let i = 0; i < temp.length - 1; i++) {\n          let numberOfOccurrences = 0\n          for (let j = i + 1; j < temp.length; j++) {\n            if (temp[i].seattotal > temp[j].seattotal) {\n              let x = temp[i]\n              temp[i] = temp[j]\n              temp[j] = x\n            }\n          }\n        }\n        this.setState({ listSeat: temp });\n      })\n\n  }\n\n  getAllCarBack = () => {\n    let link = 'http://localhost:8000/getAllBus'\n    axios\n      .post(link)\n      .then(async result => {\n        this.setState({ listBus: result.data.data })\n        let temp = result.data.data;\n        for (let i = 0; i < temp.length - 1; i++) {\n          for (let j = i + 1; j < temp.length; j++) {\n            if (temp[i].seattotal > temp[j].seattotal) {\n              let x = temp[i]\n              temp[i] = temp[j]\n              temp[j] = x\n            }\n            if (temp[j].seattotal === temp[i].seattotal) {\n              temp.splice(j, 1)\n            }\n          }\n        }\n        this.setState({ listSeat: temp });\n        this.setState({ seatDiagram: [] });\n      })\n\n  }\n  getAllAutoMarket = () => {\n    let link = 'http://localhost:8000/getAllAutoMarket'\n    axios\n      .post(link)\n      .then(result => {\n        this.setState({ listAutoMarket: result.data })\n      })\n  }\n\n  showSeatDiagram = (id) => {\n    console.log(id)\n    let link = 'http://localhost:8000/showSeatDiagram'\n    axios.post(link, { id: id }).then(result => {\n      this.setState({ listBus: result.data });\n      let seatCode = result.data[0].seats[0].seatcode\n      let arr = JSON.parse(seatCode)\n      this.setState({ seatDiagram: arr });\n      // let temp  = [[1, 0, 0, 1, 1], [0, 0, 0, 1, 1], [1, 1, 0, 0, 0], [1, 1, 0, 0, 0], [1, 1, 0, 1, 1], [1, 1, 0, 1, 1], [1, 1, 0, 1, 1], [1, 1, 0, 1, 1], [1, 1, 0, 1, 1], [1, 1, 1, 1, 1]]\n      // let arr = JSON.stringify(temp)\n      // let arr2 = JSON.parse(arr)\n      // console.log(arr2)\n\n    })\n  }\n  renderBus = () => {\n    return this.state.listBus.map((item, key) => (\n      <div>\n        <div className='row Bus' onClick={() => this.showSeatDiagram(item.id)}>\n          <div key={key} className='aBus'>\n            <div className='col-sm-5 float-sm-left' >\n              <img src={`../lib/images/${item.img}`} className=\"img-fluid\" alt=\"avatar\" />\n            </div>\n            <div className='col-sm-7 float-sm-left '>\n              <div><strong className='nameBus'>{item.name} - {item.seattotal} chổ </strong></div>\n              <div className='descriptionBus'>{item.description}</div>\n            </div>\n          </div>\n        </div>\n        <br />\n      </div>\n    ))\n    // console.log('đã vào')\n  }\n\n  async componentDidMount() {\n    await this.getAllCar()\n    await this.getAllAutoMarket()\n    // let temp = [[1, 0, 0, 1, 1], [0, 0, 0, 1, 1], [1, 1, 0, 0, 0], [1, 1, 0, 0, 0], [1, 1, 0, 1, 1], [1, 1, 0, 1, 1], [1, 1, 0, 1, 1], [1, 1, 0, 1, 1], [1, 1, 0, 1, 1], [1, 1, 1, 1, 1]]\n    // this.setState({seatDiagram : temp});\n  }\n\n  renderAutoMarker = () => {\n    return this.state.listAutoMarket.map((item) => (\n      <option key={item.id} value={item.name}>{item.name}</option>\n    ))\n  }\n\n  renderSeatTotal = () => {\n    return this.state.listSeat.map((item) => (\n      <option key={item.id} value={item.seattotal}>{item.seattotal}</option>\n    ))\n  }\n\n  renderSeatDiagram = () => {\n    return this.state.seatDiagram.map((items, key) => {\n      return items.map((item, key2) => {\n        return (\n          // <div>{console.log(item + ' - ' + key + key2)}</div>\n          key2 === items.length - 1 ? <span key><button onClick={() => this.booking(key + '' + key2)} key={key + '' + key2} className={item === 0 ? 'btn btn-black' : 'btn btn-success'}>x</button> <br /></span> : <button onClick={() => this.booking(key + '' + key2)} key={key + '' + key2} className={item === 0 ? 'btn btn-black' : 'btn btn-success'}>x</button>\n        )\n      })\n\n    })\n  }\n\n  previousPage = async() => {\n    // if(this.state.autoMarket === '' || this.state.seatTotal === '')\n    let { page } = this.state\n    if (page >= 2) {\n      await this.setState({ page: page - 1 }, () =>  console.log(this.state.page))\n      await this.getAllCar()\n    }\n  }\n\n  nextPage = async() => {\n    let { page } = this.state\n    await this.setState({ page: page + 1 }, () =>  console.log(this.state.page))\n    await this.getAllCar()\n  }\n\n  render() {\n    return (\n      <div>\n        <div className='container'>\n          <h1>Search Car</h1>\n          <div className='row'>\n          <input className='col-sm-11' type='text' name='keySearch' onChange={this.onChange}></input>\n          <button className='btn btn-success col-sm-1'><i className=\"fas fa-search\"></i></button>\n          </div>\n          <br />\n          <div className='row select'>\n            <div className='col-sm-3'></div>\n            <select className=\"form-control form-control-sm col-sm-3\" onChange={this.onChange} name='filterByAutoMarket'>\n              <option value='0'>Hãng</option>\n              {this.renderAutoMarker()}\n            </select>\n            <select className=\"form-control form-control-sm col-sm-3\" onChange={this.onChange} name='filterBySeatTotal'  >\n              <option value='0'> Số ghế </option>\n              {this.renderSeatTotal()}\n            </select>\n          </div>\n          <br />\n          <hr />\n          <div className='listBus'>\n            {this.renderBus()}\n          </div>\n          {this.state.seatDiagram.length > 0 ? <div className='seatDiagram'>\n            <h3> Sơ đồ xe </h3>\n            {this.renderSeatDiagram()}\n            <button className='btn btn-warning' onClick={this.getAllCarBack}> Back </button>\n          </div> : ''}\n          <br/>\n          <nav aria-label=\"Page navigation example\">\n  <ul className = \"pagination justify-content-center row\">\n    <li className = \"page-item col-sm-2\" >\n      <button className = 'btn btn-success' onClick = {this.previousPage} > {`<<`} </button>\n    </li>\n    <li className = \"page-item col-sm-2\" >\n    <button className = 'btn btn-success' onClick = {this.nextPage} > {`>>`} </button>\n    </li>\n  </ul>\n</nav>\n        </div>\n      </div>\n    )\n  }\n}\n\n\nexport default SearchBus"]},"metadata":{},"sourceType":"module"}