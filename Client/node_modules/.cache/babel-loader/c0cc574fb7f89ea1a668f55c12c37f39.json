{"ast":null,"code":"var _jsxFileName = \"/home/quoctai/Tai/LSH (copy)/Client/src/component/backupDatabase.js\";\nimport React, { Component } from 'react';\nimport Dropzone from 'react-dropzone';\nimport axios from 'axios';\nimport './backupDatabase.css';\n\nconst Papa = require('papaparse');\n\nvar FileSaver = require('file-saver');\n\nconst readText = file => new Promise((resolve, reject) => {\n  const reader = new FileReader();\n  reader.readAsText(file);\n\n  reader.onload = () => resolve(reader.result);\n\n  reader.onerror = reject;\n});\n\nclass BackupDatabase extends Component {\n  constructor(props) {\n    super(props);\n\n    this.exPort = () => {\n      let link = 'http://localhost:8000/getAllDatabase';\n      axios.post(link).then(result => {\n        this.setState({\n          lisAutoMarker: result.data.listAutoMarker\n        });\n        this.setState({\n          lisSeat: result.data.listSeat\n        });\n        this.setState({\n          listBus: result.data.listBus\n        });\n        let lisAutoMarkerCsv = Papa.unparse(this.state.lisAutoMarker);\n        let lisBusCsv = Papa.unparse(this.state.listBus);\n        let listSeatCsv = Papa.unparse(this.state.lisSeat);\n        FileSaver.saveAs(new Blob([lisBusCsv], {\n          type: 'application/octet-stream'\n        }), 'busdb.csv');\n        FileSaver.saveAs(new Blob([lisAutoMarkerCsv], {\n          type: 'application/octet-stream'\n        }), 'automarkerdb.csv');\n        FileSaver.saveAs(new Blob([listSeatCsv], {\n          type: 'application/octet-stream'\n        }), 'seatdb.csv');\n      });\n    };\n\n    this.handleOnDrop = async (file, rejectedFiles) => {\n      let contentString = await readText(file[0]);\n      let contentJson = Papa.parse(contentString);\n      let link = 'http://localhost:8000/importDatabase';\n      var Base64 = {\n        _keyStr: \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",\n        encode: function (e) {\n          var t = \"\";\n          var n, r, i, s, o, u, a;\n          var f = 0;\n          e = Base64._utf8_encode(e);\n\n          while (f < e.length) {\n            n = e.charCodeAt(f++);\n            r = e.charCodeAt(f++);\n            i = e.charCodeAt(f++);\n            s = n >> 2;\n            o = (n & 3) << 4 | r >> 4;\n            u = (r & 15) << 2 | i >> 6;\n            a = i & 63;\n\n            if (isNaN(r)) {\n              u = a = 64;\n            } else if (isNaN(i)) {\n              a = 64;\n            }\n\n            t = t + this._keyStr.charAt(s) + this._keyStr.charAt(o) + this._keyStr.charAt(u) + this._keyStr.charAt(a);\n          }\n\n          return t;\n        },\n        decode: function (e) {\n          var t = \"\";\n          var n, r, i;\n          var s, o, u, a;\n          var f = 0;\n          e = e.replace(/[^A-Za-z0-9+/=]/g, \"\");\n\n          while (f < e.length) {\n            s = this._keyStr.indexOf(e.charAt(f++));\n            o = this._keyStr.indexOf(e.charAt(f++));\n            u = this._keyStr.indexOf(e.charAt(f++));\n            a = this._keyStr.indexOf(e.charAt(f++));\n            n = s << 2 | o >> 4;\n            r = (o & 15) << 4 | u >> 2;\n            i = (u & 3) << 6 | a;\n            t = t + String.fromCharCode(n);\n\n            if (u != 64) {\n              t = t + String.fromCharCode(r);\n            }\n\n            if (a != 64) {\n              t = t + String.fromCharCode(i);\n            }\n          }\n\n          t = Base64._utf8_decode(t);\n          return t;\n        },\n        _utf8_encode: function (e) {\n          e = e.replace(/rn/g, \"n\");\n          var t = \"\";\n\n          for (var n = 0; n < e.length; n++) {\n            var r = e.charCodeAt(n);\n\n            if (r < 128) {\n              t += String.fromCharCode(r);\n            } else if (r > 127 && r < 2048) {\n              t += String.fromCharCode(r >> 6 | 192);\n              t += String.fromCharCode(r & 63 | 128);\n            } else {\n              t += String.fromCharCode(r >> 12 | 224);\n              t += String.fromCharCode(r >> 6 & 63 | 128);\n              t += String.fromCharCode(r & 63 | 128);\n            }\n          }\n\n          return t;\n        },\n        _utf8_decode: function (e) {\n          var t = \"\";\n          var n = 0;\n          var r = c1 = c2 = 0;\n\n          while (n < e.length) {\n            r = e.charCodeAt(n);\n\n            if (r < 128) {\n              t += String.fromCharCode(r);\n              n++;\n            } else if (r > 191 && r < 224) {\n              c2 = e.charCodeAt(n + 1);\n              t += String.fromCharCode((r & 31) << 6 | c2 & 63);\n              n += 2;\n            } else {\n              c2 = e.charCodeAt(n + 1);\n              c3 = e.charCodeAt(n + 2);\n              t += String.fromCharCode((r & 15) << 12 | (c2 & 63) << 6 | c3 & 63);\n              n += 3;\n            }\n          }\n\n          return t;\n        } // Hàm dùng để mã hóa\n\n      };\n      let contentJsonEncode = Base64.encode(contentJson);\n      console.log(contentJsonEncode); // Hàm dùng để giải mã\n      // Base64.decode(\"Chuỗi đã mã hóa\");\n      //     axios.post(link,{fileName:file[0].name, contentJson: contentJson})\n      //       .then(result => {\n      //         console.log(result)\n      //       })\n    };\n\n    this.state = {\n      lisAutoMarker: [],\n      listBus: [],\n      lisSeat: []\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, \"Backup Database\"), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"button\",\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-sm-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }), React.createElement(Dropzone, {\n      className: \"col-sm-2\",\n      onDrop: this.handleOnDrop,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, ({\n      getRootProps,\n      getInputProps\n    }) => React.createElement(\"section\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, React.createElement(\"div\", Object.assign({}, getRootProps(), {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }), React.createElement(\"input\", Object.assign({}, getInputProps(), {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      className: \"btn btn-success\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, \"Import Database\")))), React.createElement(\"div\", {\n      className: \"col-sm-1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"btn btn-success col-sm-2\",\n      onClick: this.exPort,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, \" Export Database \"), React.createElement(\"div\", {\n      className: \"col-sm-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default BackupDatabase;","map":{"version":3,"sources":["/home/quoctai/Tai/LSH (copy)/Client/src/component/backupDatabase.js"],"names":["React","Component","Dropzone","axios","Papa","require","FileSaver","readText","file","Promise","resolve","reject","reader","FileReader","readAsText","onload","result","onerror","BackupDatabase","constructor","props","exPort","link","post","then","setState","lisAutoMarker","data","listAutoMarker","lisSeat","listSeat","listBus","lisAutoMarkerCsv","unparse","state","lisBusCsv","listSeatCsv","saveAs","Blob","type","handleOnDrop","rejectedFiles","contentString","contentJson","parse","Base64","_keyStr","encode","e","t","n","r","i","s","o","u","a","f","_utf8_encode","length","charCodeAt","isNaN","charAt","decode","replace","indexOf","String","fromCharCode","_utf8_decode","c1","c2","c3","contentJsonEncode","console","log","render","getRootProps","getInputProps"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,QAAP,MAAqB,gBAArB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAO,sBAAP;;AACA,MAAMC,IAAI,GAAGC,OAAO,CAAC,WAAD,CAApB;;AACA,IAAIC,SAAS,GAAGD,OAAO,CAAC,YAAD,CAAvB;;AAEA,MAAME,QAAQ,GAAGC,IAAI,IACnB,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AAC/B,QAAMC,MAAM,GAAG,IAAIC,UAAJ,EAAf;AACAD,EAAAA,MAAM,CAACE,UAAP,CAAkBN,IAAlB;;AACAI,EAAAA,MAAM,CAACG,MAAP,GAAgB,MAAML,OAAO,CAACE,MAAM,CAACI,MAAR,CAA7B;;AACAJ,EAAAA,MAAM,CAACK,OAAP,GAAiBN,MAAjB;AACD,CALD,CADF;;AAQA,MAAMO,cAAN,SAA6BjB,SAA7B,CAAuC;AACrCkB,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SASnBC,MATmB,GASV,MAAM;AACb,UAAIC,IAAI,GAAG,sCAAX;AACAnB,MAAAA,KAAK,CAACoB,IAAN,CAAWD,IAAX,EAAiBE,IAAjB,CAAsBR,MAAM,IAAI;AAC9B,aAAKS,QAAL,CAAc;AAAEC,UAAAA,aAAa,EAAEV,MAAM,CAACW,IAAP,CAAYC;AAA7B,SAAd;AACA,aAAKH,QAAL,CAAc;AAAEI,UAAAA,OAAO,EAAEb,MAAM,CAACW,IAAP,CAAYG;AAAvB,SAAd;AACA,aAAKL,QAAL,CAAc;AAAEM,UAAAA,OAAO,EAAEf,MAAM,CAACW,IAAP,CAAYI;AAAvB,SAAd;AACA,YAAIC,gBAAgB,GAAG5B,IAAI,CAAC6B,OAAL,CAAa,KAAKC,KAAL,CAAWR,aAAxB,CAAvB;AACA,YAAIS,SAAS,GAAG/B,IAAI,CAAC6B,OAAL,CAAa,KAAKC,KAAL,CAAWH,OAAxB,CAAhB;AACA,YAAIK,WAAW,GAAGhC,IAAI,CAAC6B,OAAL,CAAa,KAAKC,KAAL,CAAWL,OAAxB,CAAlB;AACAvB,QAAAA,SAAS,CAAC+B,MAAV,CAAiB,IAAIC,IAAJ,CAAS,CAACH,SAAD,CAAT,EAAsB;AAAEI,UAAAA,IAAI,EAAE;AAAR,SAAtB,CAAjB,EAA8E,WAA9E;AACAjC,QAAAA,SAAS,CAAC+B,MAAV,CAAiB,IAAIC,IAAJ,CAAS,CAACN,gBAAD,CAAT,EAA6B;AAAEO,UAAAA,IAAI,EAAE;AAAR,SAA7B,CAAjB,EAAqF,kBAArF;AACAjC,QAAAA,SAAS,CAAC+B,MAAV,CAAiB,IAAIC,IAAJ,CAAS,CAACF,WAAD,CAAT,EAAwB;AAAEG,UAAAA,IAAI,EAAE;AAAR,SAAxB,CAAjB,EAAgF,YAAhF;AACD,OAVD;AAWD,KAtBkB;;AAAA,SAyBnBC,YAzBmB,GAyBJ,OAAOhC,IAAP,EAAaiC,aAAb,KAA+B;AAC5C,UAAIC,aAAa,GAAG,MAAMnC,QAAQ,CAACC,IAAI,CAAC,CAAD,CAAL,CAAlC;AACA,UAAImC,WAAW,GAAGvC,IAAI,CAACwC,KAAL,CAAWF,aAAX,CAAlB;AACA,UAAIpB,IAAI,GAAG,sCAAX;AACJ,UAAIuB,MAAM,GAAC;AAACC,QAAAA,OAAO,EAAC,mEAAT;AAA6EC,QAAAA,MAAM,EAAC,UAASC,CAAT,EAAW;AAAC,cAAIC,CAAC,GAAC,EAAN;AAAS,cAAIC,CAAJ,EAAMC,CAAN,EAAQC,CAAR,EAAUC,CAAV,EAAYC,CAAZ,EAAcC,CAAd,EAAgBC,CAAhB;AAAkB,cAAIC,CAAC,GAAC,CAAN;AAAQT,UAAAA,CAAC,GAACH,MAAM,CAACa,YAAP,CAAoBV,CAApB,CAAF;;AAAyB,iBAAMS,CAAC,GAACT,CAAC,CAACW,MAAV,EAAiB;AAACT,YAAAA,CAAC,GAACF,CAAC,CAACY,UAAF,CAAaH,CAAC,EAAd,CAAF;AAAoBN,YAAAA,CAAC,GAACH,CAAC,CAACY,UAAF,CAAaH,CAAC,EAAd,CAAF;AAAoBL,YAAAA,CAAC,GAACJ,CAAC,CAACY,UAAF,CAAaH,CAAC,EAAd,CAAF;AAAoBJ,YAAAA,CAAC,GAACH,CAAC,IAAE,CAAL;AAAOI,YAAAA,CAAC,GAAC,CAACJ,CAAC,GAAC,CAAH,KAAO,CAAP,GAASC,CAAC,IAAE,CAAd;AAAgBI,YAAAA,CAAC,GAAC,CAACJ,CAAC,GAAC,EAAH,KAAQ,CAAR,GAAUC,CAAC,IAAE,CAAf;AAAiBI,YAAAA,CAAC,GAACJ,CAAC,GAAC,EAAJ;;AAAO,gBAAGS,KAAK,CAACV,CAAD,CAAR,EAAY;AAACI,cAAAA,CAAC,GAACC,CAAC,GAAC,EAAJ;AAAO,aAApB,MAAyB,IAAGK,KAAK,CAACT,CAAD,CAAR,EAAY;AAACI,cAAAA,CAAC,GAAC,EAAF;AAAK;;AAAAP,YAAAA,CAAC,GAACA,CAAC,GAAC,KAAKH,OAAL,CAAagB,MAAb,CAAoBT,CAApB,CAAF,GAAyB,KAAKP,OAAL,CAAagB,MAAb,CAAoBR,CAApB,CAAzB,GAAgD,KAAKR,OAAL,CAAagB,MAAb,CAAoBP,CAApB,CAAhD,GAAuE,KAAKT,OAAL,CAAagB,MAAb,CAAoBN,CAApB,CAAzE;AAAgG;;AAAA,iBAAOP,CAAP;AAAS,SAA7a;AAA8ac,QAAAA,MAAM,EAAC,UAASf,CAAT,EAAW;AAAC,cAAIC,CAAC,GAAC,EAAN;AAAS,cAAIC,CAAJ,EAAMC,CAAN,EAAQC,CAAR;AAAU,cAAIC,CAAJ,EAAMC,CAAN,EAAQC,CAAR,EAAUC,CAAV;AAAY,cAAIC,CAAC,GAAC,CAAN;AAAQT,UAAAA,CAAC,GAACA,CAAC,CAACgB,OAAF,CAAU,kBAAV,EAA6B,EAA7B,CAAF;;AAAmC,iBAAMP,CAAC,GAACT,CAAC,CAACW,MAAV,EAAiB;AAACN,YAAAA,CAAC,GAAC,KAAKP,OAAL,CAAamB,OAAb,CAAqBjB,CAAC,CAACc,MAAF,CAASL,CAAC,EAAV,CAArB,CAAF;AAAsCH,YAAAA,CAAC,GAAC,KAAKR,OAAL,CAAamB,OAAb,CAAqBjB,CAAC,CAACc,MAAF,CAASL,CAAC,EAAV,CAArB,CAAF;AAAsCF,YAAAA,CAAC,GAAC,KAAKT,OAAL,CAAamB,OAAb,CAAqBjB,CAAC,CAACc,MAAF,CAASL,CAAC,EAAV,CAArB,CAAF;AAAsCD,YAAAA,CAAC,GAAC,KAAKV,OAAL,CAAamB,OAAb,CAAqBjB,CAAC,CAACc,MAAF,CAASL,CAAC,EAAV,CAArB,CAAF;AAAsCP,YAAAA,CAAC,GAACG,CAAC,IAAE,CAAH,GAAKC,CAAC,IAAE,CAAV;AAAYH,YAAAA,CAAC,GAAC,CAACG,CAAC,GAAC,EAAH,KAAQ,CAAR,GAAUC,CAAC,IAAE,CAAf;AAAiBH,YAAAA,CAAC,GAAC,CAACG,CAAC,GAAC,CAAH,KAAO,CAAP,GAASC,CAAX;AAAaP,YAAAA,CAAC,GAACA,CAAC,GAACiB,MAAM,CAACC,YAAP,CAAoBjB,CAApB,CAAJ;;AAA2B,gBAAGK,CAAC,IAAE,EAAN,EAAS;AAACN,cAAAA,CAAC,GAACA,CAAC,GAACiB,MAAM,CAACC,YAAP,CAAoBhB,CAApB,CAAJ;AAA2B;;AAAA,gBAAGK,CAAC,IAAE,EAAN,EAAS;AAACP,cAAAA,CAAC,GAACA,CAAC,GAACiB,MAAM,CAACC,YAAP,CAAoBf,CAApB,CAAJ;AAA2B;AAAC;;AAAAH,UAAAA,CAAC,GAACJ,MAAM,CAACuB,YAAP,CAAoBnB,CAApB,CAAF;AAAyB,iBAAOA,CAAP;AAAS,SAAv2B;AAAw2BS,QAAAA,YAAY,EAAC,UAASV,CAAT,EAAW;AAACA,UAAAA,CAAC,GAACA,CAAC,CAACgB,OAAF,CAAU,KAAV,EAAgB,GAAhB,CAAF;AAAuB,cAAIf,CAAC,GAAC,EAAN;;AAAS,eAAI,IAAIC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACF,CAAC,CAACW,MAAhB,EAAuBT,CAAC,EAAxB,EAA2B;AAAC,gBAAIC,CAAC,GAACH,CAAC,CAACY,UAAF,CAAaV,CAAb,CAAN;;AAAsB,gBAAGC,CAAC,GAAC,GAAL,EAAS;AAACF,cAAAA,CAAC,IAAEiB,MAAM,CAACC,YAAP,CAAoBhB,CAApB,CAAH;AAA0B,aAApC,MAAyC,IAAGA,CAAC,GAAC,GAAF,IAAOA,CAAC,GAAC,IAAZ,EAAiB;AAACF,cAAAA,CAAC,IAAEiB,MAAM,CAACC,YAAP,CAAoBhB,CAAC,IAAE,CAAH,GAAK,GAAzB,CAAH;AAAiCF,cAAAA,CAAC,IAAEiB,MAAM,CAACC,YAAP,CAAoBhB,CAAC,GAAC,EAAF,GAAK,GAAzB,CAAH;AAAiC,aAApF,MAAwF;AAACF,cAAAA,CAAC,IAAEiB,MAAM,CAACC,YAAP,CAAoBhB,CAAC,IAAE,EAAH,GAAM,GAA1B,CAAH;AAAkCF,cAAAA,CAAC,IAAEiB,MAAM,CAACC,YAAP,CAAoBhB,CAAC,IAAE,CAAH,GAAK,EAAL,GAAQ,GAA5B,CAAH;AAAoCF,cAAAA,CAAC,IAAEiB,MAAM,CAACC,YAAP,CAAoBhB,CAAC,GAAC,EAAF,GAAK,GAAzB,CAAH;AAAiC;AAAC;;AAAA,iBAAOF,CAAP;AAAS,SAAtsC;AAAusCmB,QAAAA,YAAY,EAAC,UAASpB,CAAT,EAAW;AAAC,cAAIC,CAAC,GAAC,EAAN;AAAS,cAAIC,CAAC,GAAC,CAAN;AAAQ,cAAIC,CAAC,GAACkB,EAAE,GAACC,EAAE,GAAC,CAAZ;;AAAc,iBAAMpB,CAAC,GAACF,CAAC,CAACW,MAAV,EAAiB;AAACR,YAAAA,CAAC,GAACH,CAAC,CAACY,UAAF,CAAaV,CAAb,CAAF;;AAAkB,gBAAGC,CAAC,GAAC,GAAL,EAAS;AAACF,cAAAA,CAAC,IAAEiB,MAAM,CAACC,YAAP,CAAoBhB,CAApB,CAAH;AAA0BD,cAAAA,CAAC;AAAG,aAAxC,MAA6C,IAAGC,CAAC,GAAC,GAAF,IAAOA,CAAC,GAAC,GAAZ,EAAgB;AAACmB,cAAAA,EAAE,GAACtB,CAAC,CAACY,UAAF,CAAaV,CAAC,GAAC,CAAf,CAAH;AAAqBD,cAAAA,CAAC,IAAEiB,MAAM,CAACC,YAAP,CAAoB,CAAChB,CAAC,GAAC,EAAH,KAAQ,CAAR,GAAUmB,EAAE,GAAC,EAAjC,CAAH;AAAwCpB,cAAAA,CAAC,IAAE,CAAH;AAAK,aAAnF,MAAuF;AAACoB,cAAAA,EAAE,GAACtB,CAAC,CAACY,UAAF,CAAaV,CAAC,GAAC,CAAf,CAAH;AAAqBqB,cAAAA,EAAE,GAACvB,CAAC,CAACY,UAAF,CAAaV,CAAC,GAAC,CAAf,CAAH;AAAqBD,cAAAA,CAAC,IAAEiB,MAAM,CAACC,YAAP,CAAoB,CAAChB,CAAC,GAAC,EAAH,KAAQ,EAAR,GAAW,CAACmB,EAAE,GAAC,EAAJ,KAAS,CAApB,GAAsBC,EAAE,GAAC,EAA7C,CAAH;AAAoDrB,cAAAA,CAAC,IAAE,CAAH;AAAK;AAAC;;AAAA,iBAAOD,CAAP;AAAS,SAArhD,CACX;;AADW,OAAX;AAEA,UAAIuB,iBAAiB,GAAG3B,MAAM,CAACE,MAAP,CAAcJ,WAAd,CAAxB;AACA8B,MAAAA,OAAO,CAACC,GAAR,CAAYF,iBAAZ,EAPgD,CAQhD;AACA;AACA;AACA;AACA;AACA;AACG,KAvCkB;;AAEjB,SAAKtC,KAAL,GAAa;AACXR,MAAAA,aAAa,EAAE,EADJ;AAEXK,MAAAA,OAAO,EAAE,EAFE;AAGXF,MAAAA,OAAO,EAAE;AAHE,KAAb;AAKD;;AAiCD8C,EAAAA,MAAM,GAAG;AACP,WACE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,QAAf;AAAwB,MAAA,SAAS,EAAC,KAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEE,oBAAC,QAAD;AAAU,MAAA,SAAS,EAAG,UAAtB;AAAiC,MAAA,MAAM,EAAE,KAAKnC,YAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,CAAC;AAAEoC,MAAAA,YAAF;AAAgBC,MAAAA;AAAhB,KAAD,KACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,6CAASD,YAAY,EAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QACE,+CAAWC,aAAa,EAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OADF,EAEE;AAAQ,MAAA,SAAS,EAAG,iBAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAFF,CADF,CAFJ,CAFF,EAaE;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAbF,EAcE;AAAQ,MAAA,SAAS,EAAC,0BAAlB;AAA6C,MAAA,OAAO,EAAE,KAAKxD,MAA3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAdF,EAeE;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAfF,CADF,CAHF,CADF;AA0BD;;AApEoC;;AAuEvC,eAAeH,cAAf","sourcesContent":["import React, { Component } from 'react'\nimport Dropzone from 'react-dropzone'\nimport axios from 'axios'\nimport './backupDatabase.css'\nconst Papa = require('papaparse')\nvar FileSaver = require('file-saver')\n\nconst readText = file =>\n  new Promise((resolve, reject) => {\n    const reader = new FileReader()\n    reader.readAsText(file)\n    reader.onload = () => resolve(reader.result)\n    reader.onerror = reject\n  })\n\nclass BackupDatabase extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      lisAutoMarker: [],\n      listBus: [],\n      lisSeat: []\n    }\n  }\n\n  exPort = () => {\n    let link = 'http://localhost:8000/getAllDatabase'\n    axios.post(link).then(result => {\n      this.setState({ lisAutoMarker: result.data.listAutoMarker })\n      this.setState({ lisSeat: result.data.listSeat })\n      this.setState({ listBus: result.data.listBus })\n      let lisAutoMarkerCsv = Papa.unparse(this.state.lisAutoMarker)\n      let lisBusCsv = Papa.unparse(this.state.listBus)\n      let listSeatCsv = Papa.unparse(this.state.lisSeat)\n      FileSaver.saveAs(new Blob([lisBusCsv], { type: 'application/octet-stream' }), 'busdb.csv')\n      FileSaver.saveAs(new Blob([lisAutoMarkerCsv], { type: 'application/octet-stream' }), 'automarkerdb.csv')\n      FileSaver.saveAs(new Blob([listSeatCsv], { type: 'application/octet-stream' }), 'seatdb.csv')\n    })\n  }\n\n\n  handleOnDrop = async (file, rejectedFiles) => {\n    let contentString = await readText(file[0])\n    let contentJson = Papa.parse(contentString)\n    let link = 'http://localhost:8000/importDatabase'\nvar Base64={_keyStr:\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",encode:function(e){var t=\"\";var n,r,i,s,o,u,a;var f=0;e=Base64._utf8_encode(e);while(f<e.length){n=e.charCodeAt(f++);r=e.charCodeAt(f++);i=e.charCodeAt(f++);s=n>>2;o=(n&3)<<4|r>>4;u=(r&15)<<2|i>>6;a=i&63;if(isNaN(r)){u=a=64}else if(isNaN(i)){a=64}t=t+this._keyStr.charAt(s)+this._keyStr.charAt(o)+this._keyStr.charAt(u)+this._keyStr.charAt(a)}return t},decode:function(e){var t=\"\";var n,r,i;var s,o,u,a;var f=0;e=e.replace(/[^A-Za-z0-9+/=]/g,\"\");while(f<e.length){s=this._keyStr.indexOf(e.charAt(f++));o=this._keyStr.indexOf(e.charAt(f++));u=this._keyStr.indexOf(e.charAt(f++));a=this._keyStr.indexOf(e.charAt(f++));n=s<<2|o>>4;r=(o&15)<<4|u>>2;i=(u&3)<<6|a;t=t+String.fromCharCode(n);if(u!=64){t=t+String.fromCharCode(r)}if(a!=64){t=t+String.fromCharCode(i)}}t=Base64._utf8_decode(t);return t},_utf8_encode:function(e){e=e.replace(/rn/g,\"n\");var t=\"\";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<128){t+=String.fromCharCode(r)}else if(r>127&&r<2048){t+=String.fromCharCode(r>>6|192);t+=String.fromCharCode(r&63|128)}else{t+=String.fromCharCode(r>>12|224);t+=String.fromCharCode(r>>6&63|128);t+=String.fromCharCode(r&63|128)}}return t},_utf8_decode:function(e){var t=\"\";var n=0;var r=c1=c2=0;while(n<e.length){r=e.charCodeAt(n);if(r<128){t+=String.fromCharCode(r);n++}else if(r>191&&r<224){c2=e.charCodeAt(n+1);t+=String.fromCharCode((r&31)<<6|c2&63);n+=2}else{c2=e.charCodeAt(n+1);c3=e.charCodeAt(n+2);t+=String.fromCharCode((r&15)<<12|(c2&63)<<6|c3&63);n+=3}}return t}}\n// Hàm dùng để mã hóa\nlet contentJsonEncode = Base64.encode(contentJson);\nconsole.log(contentJsonEncode)\n// Hàm dùng để giải mã\n// Base64.decode(\"Chuỗi đã mã hóa\");\n//     axios.post(link,{fileName:file[0].name, contentJson: contentJson})\n//       .then(result => {\n//         console.log(result)\n//       })\n  }\n  render() {\n    return (\n      <div className='container'>\n        <h1>Backup Database</h1>\n        <hr />\n        <div>\n          <div className='button' className='row'>\n            <div className='col-sm-4'></div>\n            <Dropzone className = 'col-sm-2' onDrop={this.handleOnDrop}>\n              {({ getRootProps, getInputProps }) => (\n                <section>\n                  <div {...getRootProps()}>\n                    <input {...getInputProps()} />\n                    <button className = 'btn btn-success'>Import Database</button>\n                  </div>\n                </section>\n              )}\n            </Dropzone>\n\n            <div className='col-sm-1'></div>\n            <button className='btn btn-success col-sm-2' onClick={this.exPort}> Export Database </button>\n            <div className='col-sm-3'></div>\n          </div>\n\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default BackupDatabase"]},"metadata":{},"sourceType":"module"}